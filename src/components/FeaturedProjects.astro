---
import Button from "@components/Button.astro"
import Project from "@components/Project.astro"
import { uiStrings } from "@i18n/uiStrings"
import getPublishedPosts from "@utilities/getPublishedPosts"
import Caption from "./Caption.astro"
const title = `${uiStrings.projectTitle[Astro.currentLocale]}`
const subtitle = `${uiStrings.projectSubtitle[Astro.currentLocale]}`
const link = `${uiStrings.projectLink[Astro.currentLocale]}`

const collection = "projects"

const posts = await getPublishedPosts(Astro.currentLocale, collection)
const featuredPosts = posts.filter(({ data }) => data.isFeatured)
---

<div class="max-w-7xl mx-auto px-4">
  <div class="w-full mb-4">
    <Caption title={title} subtitle={subtitle}/>
  </div>
  {
    featuredPosts?.length > 0 && (
      <ul>
        {featuredPosts.map((post) => (
          <Project post={post} collection={collection}/>
        ))}
      </ul>
    )
  }
  <div class="mt-16">
    <Button href="/projects">{link}</Button>
  </div>
</div>